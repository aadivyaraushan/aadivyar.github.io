// Knowledge base extracted from Profile.pdf
export const profileKnowledge = {
  personal: {
    name: "Aadivya Raushan",
    email: "ssdear@gmail.com",
    phone: "+971 56 106 6469",
    linkedin: "https://www.linkedin.com/in/aadivya-raushan-245264240/",
    github: "https://github.com/aadivyaraushan",
    location: "Dubai, United Arab Emirates",
    education: "CS @ UIUC (University of Illinois Urbana-Champaign)",
    expectedGraduation: "May 2029",
    description: "UIUC CS freshman interested in startups and computer science research",
    interests: ["AI", "Research", "Startups", "Building the Future of Work and Learning"],
    languages: ["English (Native)", "Hindi (Fluent)", "Spanish (Basic)"],
    academics: {
      sat: "1560 (780 English, 780 Math)",
      ib: "Grade 12: 41/45 (Top 10%), Grade 11: 41/42 (Top 1-2%)",
      icse: "Grade 10: Average of 98.4%"
    }
  },
  
  experience: [
    {
      company: "University of Illinois Urbana-Champaign",
      role: "Undergraduate Researcher @ FOCAL Lab",
      duration: "July 2025 - Present",
      description: "Working under Dr. Gagandeep Singh on developing systematic and theoretically principled approaches for constructing intelligent compute systems with formal guarantees about their behavior and safety."
    },
    {
      company: "Stealth Startup",
      role: "Co-Founder",
      duration: "June 2025 - Present",
      description: "Co-founding a stealth startup"
    },
    {
      company: "AutoCorrect",
      role: "Independent Researcher",
      duration: "April 2024 - May 2025",
      description: "Invented AutoCorrect, a cutting-edge AI algorithm leveraging OpenAI's GPTs to autonomously grade IB responses. Achieved 100x faster grading and 60% accuracy by deploying the algorithm on 60+ real IB questions."
    },
    {
      company: "LessonGPT",
      role: "Founder",
      duration: "May 2023 - December 2024",
      description: "Engineered a first-of-its-kind AI platform that generated 1,300+ lesson plans, slashing teacher prep time and directly impacting 120+ educators. Selected as finalist in GEMS Global Innovation Challenge."
    },
    {
      company: "Project Streamline",
      role: "Co-Founder",
      duration: "September 2023 - January 2024",
      description: "Co-founded and led tech for a biometric authentication system, eliminating the need for physical ID cards in schools."
    }
  ],
  
  projects: [
    {
      name: "LessonGPT",
      role: "Founder & Lead Developer",
      duration: "May 2023 - Present",
      description: "AI platform for generating lesson plans using LLMs",
      impact: "120+ educators, 1300+ lesson plans generated, adopted school-wide",
      recognition: "Featured by Gulf News, GEMS Global Innovation Challenge finalist (top 8/300+), presented to 170,000+ at GITEX"
    },
    {
      name: "AutoCorrect", 
      role: "Independent Researcher",
      duration: "April 2024 - Present",
      description: "AI algorithm leveraging OpenAI's GPTs to autonomously grade IB responses",
      impact: "100x faster grading, 60% accuracy on 60+ real IB questions"
    },
    {
      name: "Project Streamline",
      role: "Co-Founder & CTO", 
      duration: "September 2023 - January 2024",
      description: "Biometric authentication system eliminating physical ID cards in schools",
      impact: "Represented UAE at iCAN Global Summit (500+ participants, 39+ countries), GITEX Global, Intersec Conference (48K+ attendees)"
    },
    {
      name: "SupplyBlock",
      role: "Founder & Lead Developer",
      duration: "June 2022 - August 2022", 
      description: "Global blockchain-powered supply chain platform",
      impact: "10,000 lines of code, full-stack deployment, self-taught blockchain in one month"
    },
    {
      name: "Nocrastination",
      role: "Founder & CEO",
      duration: "May 2021 - March 2022",
      description: "Productivity videogame for teens with ADHD and attentional challenges",
      impact: "Led team of 5, pitched to 100+ stakeholders, top 15/60+ projects in entrepreneurship program"
    }
  ],
  
  achievements: [
    "Gulf News Featured Innovator (LessonGPT), 2023",
    "GEMS Global Innovation Cup Finalist (Top 8/350+), 2023", 
    "iCAN Global Innovation Conference UAE Representative, 2023",
    "Cambridge Center of International Research Spotlight Scholar & STEM Merit Scholar, 2023",
    "ICSE Grade 10 World Topper: Computer Science & Chemistry, 2023",
    "STEMPedia Global AI Competition Finalist (Top 10/140+), 2021",
    "Top 9 in World Scholar's Cup Dubai Round",
    "Finalist in Teens' Next Big Idea global drone competition",
    "Top 15 in Entrepreneurship and Innovation Program",
    "Merit Scholarship Awardee",
    "Cambridge Future Scholar Programme in Quantum Computation (15% acceptance rate)"
  ],
  
  skills: {
    programmingLanguages: ["JavaScript", "Python", "HTML", "CSS", "Solidity"],
    frameworks: ["React.js", "Tailwind CSS"],
    tools: ["Git", "AWS", "Docker", "Node.js", "Truffle", "Google Analytics", "Adobe Creative Suite", "GIMP", "DaVinci Resolve"],
    concepts: ["Artificial Intelligence (AI)", "Machine Learning (ML)", "Generative AI (GPT models)", "Blockchain", "Quantum Computation", "Data Analysis", "Gamification", "Lean Startup Methodology", "Design Thinking"],
    research: ["Primary Research", "Secondary Research", "Quantum Computation"],
    certifications: [
      "Solidity & Ethereum in React (Next JS): The Complete Guide",
      "Beginning C++ Programming - From Beginner to Beyond", 
      "Unreal Engine 4 - Learn to Make a Game Prototype in UE4"
    ]
  },
  
  research: [
    {
      title: "AI for Automated Exam Correction",
      role: "Independent Researcher",
      duration: "April 2024 - Present",
      description: "Invented AutoCorrect, leveraging OpenAI's GPTs to autonomously grade IB responses",
      impact: "100x faster grading, 60% accuracy on 60+ real IB questions"
    },
    {
      title: "Quantum Computation & Information",
      role: "Student Researcher",
      institution: "Cambridge Centre for International Research (CCIR)",
      duration: "June 2023 - September 2023",
      description: "Research on quantum superposition, entanglement, Shor's algorithm, and quantum noise correction",
      mentor: "Dr. Sergii Strelchuk (University of Cambridge)",
      recognition: "CCIR Spotlight Scholar, STEM Merit Scholarship"
    },
    {
      title: "Gamification & Adolescent Productivity", 
      role: "Independent Researcher",
      duration: "January 2022 - April 2023",
      description: "Cross-sectional field study on gamification's impact on adolescent productivity",
      methods: "Python data analysis, Wilcoxon rank-sum test",
      publication: "International Journal of Novel Research and Development (impact factor: 8.76)"
    }
  ],

  publications: [
    "Effect of Gamification on Task Completion Rates of Adolescents - International Journal of Novel Research and Development"
  ],

  leadership: [
    {
      organization: "Design For Change (UAE Chapter)",
      role: "Lead Technologist, National Core Team",
      duration: "September 2023 - Present", 
      description: "Lead technologist for UAE chapter of UNICEF-partnered, Pope Francis-recognized global innovation movement spanning 78+ countries",
      impact: "Directed events with 40+ schools and 330+ participants across 29+ countries"
    }
  ]
};

// Simple keyword matching for RAG
export function findRelevantInfo(query) {
  const queryLower = query.toLowerCase();
  const relevantSections = [];
  
  // Check for personal info queries
  if (queryLower.includes('who') || queryLower.includes('name') || queryLower.includes('about')) {
    relevantSections.push(profileKnowledge.personal);
  }
  
  // Check for education queries
  if (queryLower.includes('study') || queryLower.includes('school') || queryLower.includes('university') || queryLower.includes('uiuc')) {
    relevantSections.push({
      type: 'education',
      info: `${profileKnowledge.personal.education}. Also attended GEMS Modern Academy in Dubai for high school.`
    });
  }
  
  // Check for work/experience queries
  if (queryLower.includes('work') || queryLower.includes('job') || queryLower.includes('experience') || queryLower.includes('research')) {
    relevantSections.push(...profileKnowledge.experience);
  }
  
  // Check for project queries
  if (queryLower.includes('project') || queryLower.includes('build') || queryLower.includes('created') || queryLower.includes('lessongpt') || queryLower.includes('autocorrect') || queryLower.includes('streamline')) {
    relevantSections.push(...profileKnowledge.projects);
  }
  
  // Check for skills queries
  if (queryLower.includes('skill') || queryLower.includes('programming') || queryLower.includes('language') || queryLower.includes('tech') || queryLower.includes('framework') || queryLower.includes('tool')) {
    relevantSections.push(profileKnowledge.skills);
  }
  
  // Check for research queries
  if (queryLower.includes('research') || queryLower.includes('quantum') || queryLower.includes('gamification') || queryLower.includes('autocorrect') || queryLower.includes('cambridge')) {
    relevantSections.push(...profileKnowledge.research);
  }
  
  // Check for leadership queries
  if (queryLower.includes('leadership') || queryLower.includes('volunteer') || queryLower.includes('design for change')) {
    relevantSections.push(...profileKnowledge.leadership);
  }
  
  // Check for academic performance
  if (queryLower.includes('grade') || queryLower.includes('score') || queryLower.includes('academic') || queryLower.includes('sat') || queryLower.includes('ib')) {
    relevantSections.push({
      type: 'academics',
      data: profileKnowledge.personal.academics
    });
  }
  
  // Check for achievements/awards
  if (queryLower.includes('award') || queryLower.includes('achievement') || queryLower.includes('competition') || queryLower.includes('winner')) {
    relevantSections.push({
      type: 'achievements',
      list: profileKnowledge.achievements
    });
  }
  
  // Check for contact info
  if (queryLower.includes('contact') || queryLower.includes('email') || queryLower.includes('reach')) {
    relevantSections.push({
      type: 'contact',
      email: profileKnowledge.personal.email,
      linkedin: "linkedin.com/in/aadivyaraushan-245264240"
    });
  }
  
  return relevantSections;
}

export function generateResponse(query, relevantInfo) {
  if (relevantInfo.length === 0) {
    return "I don't have specific information about that topic in Aadivya's profile. You could ask about his education, work experience, projects, skills, or achievements!";
  }
  
  const queryLower = query.toLowerCase();
  
  // Personal info responses
  if (queryLower.includes('who') || queryLower.includes('about')) {
    return `${profileKnowledge.personal.name} is a ${profileKnowledge.personal.education} student from ${profileKnowledge.personal.location}. He's ${profileKnowledge.personal.description} and is interested in ${profileKnowledge.personal.interests.join(', ')}.`;
  }
  
  // Education responses
  if (queryLower.includes('study') || queryLower.includes('school') || queryLower.includes('university')) {
    return `Aadivya is currently studying ${profileKnowledge.personal.education}. He previously attended GEMS Modern Academy in Dubai for high school. He also participated in the Cambridge Future Scholar Programme in Quantum Computation and Information with only a 15% acceptance rate.`;
  }
  
  // Current work
  if (queryLower.includes('current') || queryLower.includes('now') || queryLower.includes('working')) {
    const current = profileKnowledge.experience.filter(exp => exp.duration.includes('Present'));
    return current.map(exp => `Currently ${exp.role} at ${exp.company}: ${exp.description}`).join(' Also, ');
  }
  
  // Projects
  if (queryLower.includes('project') || queryLower.includes('build') || queryLower.includes('created')) {
    if (queryLower.includes('lessongpt')) {
      const lessonGPT = profileKnowledge.projects.find(p => p.name === 'LessonGPT');
      return `LessonGPT: ${lessonGPT.description}. Impact: ${lessonGPT.impact}. ${lessonGPT.recognition}`;
    }
    return `Aadivya has worked on several major projects including: ${profileKnowledge.projects.map(p => `${p.name} (${p.description})`).join(', ')}.`;
  }
  
  // Skills
  if (queryLower.includes('skill') || queryLower.includes('programming') || queryLower.includes('tech')) {
    return `Aadivya's technical skills include: ${Object.values(profileKnowledge.skills.programming).join(', ')}. He also has certifications in ${profileKnowledge.skills.certifications.join(', ')}.`;
  }
  
  // Achievements
  if (queryLower.includes('award') || queryLower.includes('achievement') || queryLower.includes('competition')) {
    return `Some of Aadivya's key achievements include: ${profileKnowledge.achievements.slice(0, 3).join(', ')}, and more!`;
  }
  
  // Contact
  if (queryLower.includes('contact') || queryLower.includes('email') || queryLower.includes('reach') || queryLower.includes('phone')) {
    return `You can contact Aadivya at ${profileKnowledge.personal.email}, call ${profileKnowledge.personal.phone}, or connect on LinkedIn: ${profileKnowledge.personal.linkedin}. GitHub: ${profileKnowledge.personal.github}`;
  }
  
  // Skills detailed response
  if (queryLower.includes('skill') || queryLower.includes('programming') || queryLower.includes('tech')) {
    return `Aadivya's technical skills include:\n• Programming: ${profileKnowledge.skills.programmingLanguages.join(', ')}\n• Frameworks: ${profileKnowledge.skills.frameworks.join(', ')}\n• Tools: ${profileKnowledge.skills.tools.join(', ')}\n• Concepts: ${profileKnowledge.skills.concepts.join(', ')}`;
  }
  
  // Academic performance
  if (queryLower.includes('grade') || queryLower.includes('score') || queryLower.includes('academic')) {
    return `Aadivya's academic achievements: SAT: ${profileKnowledge.personal.academics.sat}, IB: ${profileKnowledge.personal.academics.ib}, ICSE: ${profileKnowledge.personal.academics.icse}`;
  }
  
  // Research
  if (queryLower.includes('research') || queryLower.includes('quantum') || queryLower.includes('gamification')) {
    const researchList = profileKnowledge.research.map(r => `${r.title} (${r.duration}): ${r.description}`).join('. ');
    return `Aadivya's research experience includes: ${researchList}`;
  }
  
  // Default response with relevant info
  const infoText = relevantInfo.map(info => {
    if (typeof info === 'object' && info.description) {
      return `${info.company || info.name}: ${info.description}`;
    }
    return JSON.stringify(info);
  }).join(' ');
  
  return `Based on Aadivya's profile: ${infoText}`;
}